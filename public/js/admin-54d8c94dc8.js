var babelHelpers={};babelHelpers["typeof"]="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},babelHelpers.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},babelHelpers.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),function(e){"undefined"!=typeof module&&"object"==("undefined"==typeof exports?"undefined":babelHelpers["typeof"](exports))?"undefined"!=typeof window?module.exports=e():module.exports=e:window.Dropdown=e()}(function(e){var t=function(e){this.menu="object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))?e:document.querySelector(e),this.init()};t.prototype={init:function(){this.actions(),this.menu.setAttribute("tabindex","0"),document.addEventListener("click",this.handle,!1)},actions:function(){var e=this;this.handle=function(t){var n=t.target||t.currentTarget;n===e.menu||n===e.menu.querySelector("span")?e.toggle(t):e.close(200),/\#$/g.test(n.href)&&t.preventDefault()},this.toggle=function(e){/open/.test(this.menu.parentNode.className)?(this.close(0),document.removeEventListener("keydown",this.key,!1)):(this.menu.parentNode.className+=" open",this.menu.setAttribute("aria-expanded",!0),document.addEventListener("keydown",this.key,!1))},this.key=function(t){27==t.which&&e.close(0)},this.close=function(t){setTimeout(function(){e.menu.parentNode.className=e.menu.parentNode.className.replace(" open",""),e.menu.setAttribute("aria-expanded",!1)},t)}}};var n=document.querySelectorAll("[data-toggle=dropdown]"),r=0,a=n.length;for(r;a>r;r++)new t(n[r]);return t}),function(e){"undefined"!=typeof module&&"object"==("undefined"==typeof exports?"undefined":babelHelpers["typeof"](exports))?"undefined"!=typeof window?module.exports=e():module.exports=e:window.Alert=e()}(function(e){var t=function(e){this.btn="object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))?e:document.querySelector(e),this.alert=null,this.duration=150,this.init()};t.prototype={init:function(){this.actions(),document.addEventListener("click",this.close,!1)},actions:function(){var e=this;this.close=function(t){var n=t.target;e.btn="alert"===n.getAttribute("data-dismiss")&&"close"===n.className?n:n.parentNode,e.alert=e.btn.parentNode,null!==e.alert&&"alert"===e.btn.getAttribute("data-dismiss")&&/in/.test(e.alert.className)&&(e.alert.className=e.alert.className.replace(" in",""),setTimeout(function(){e.alert&&e.alert.parentNode.removeChild(e.alert)},e.duration))}}};var n=document.querySelectorAll('[data-dismiss="alert"]'),r=0,a=n.length;for(r;a>r;r++)new t(n[r]);return t}),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}return"function"==typeof window.CustomEvent?!1:(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),function(){void 0===Function.prototype.name&&void 0!==Object.defineProperty&&Object.defineProperty(Function.prototype,"name",{get:function(){var e=/function\s([^(]{1,})\(/,t=e.exec(this.toString());return t&&t.length>1?t[1].trim():""},set:function(e){}})}(),function(e){function t(){}function n(e,t){return function(){e.apply(t,arguments)}}function r(e){if("object"!==babelHelpers["typeof"](this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],d(e,this)}function a(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void u(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._state?i:o)(t.promise,e._value);var r;try{r=n(e._value)}catch(a){return void o(t.promise,a)}i(t.promise,r)}))}function i(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===("undefined"==typeof t?"undefined":babelHelpers["typeof"](t))||"function"==typeof t)){var a=t.then;if(t instanceof r)return e._state=3,e._value=t,void s(e);if("function"==typeof a)return void d(n(a,t),e)}e._state=1,e._value=t,s(e)}catch(i){o(e,i)}}function o(e,t){e._state=2,e._value=t,s(e)}function s(e){2===e._state&&0===e._deferreds.length&&u(function(){e._handled||p(e._value)});for(var t=0,n=e._deferreds.length;n>t;t++)a(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function d(e,t){var n=!1;try{e(function(e){n||(n=!0,i(t,e))},function(e){n||(n=!0,o(t,e))})}catch(r){if(n)return;n=!0,o(t,r)}}var c=setTimeout,u="function"==typeof setImmediate&&setImmediate||function(e){c(e,0)},p=function(e){"undefined"!=typeof console&&console};r.prototype["catch"]=function(e){return this.then(null,e)},r.prototype.then=function(e,n){var r=new this.constructor(t);return a(this,new l(e,n,r)),r},r.all=function(e){var t=Array.prototype.slice.call(e);return new r(function(e,n){function r(i,o){try{if(o&&("object"===("undefined"==typeof o?"undefined":babelHelpers["typeof"](o))||"function"==typeof o)){var s=o.then;if("function"==typeof s)return void s.call(o,function(e){r(i,e)},n)}t[i]=o,0===--a&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var a=t.length,i=0;i<t.length;i++)r(i,t[i])})},r.resolve=function(e){return e&&"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))&&e.constructor===r?e:new r(function(t){t(e)})},r.reject=function(e){return new r(function(t,n){n(e)})},r.race=function(e){return new r(function(t,n){for(var r=0,a=e.length;a>r;r++)e[r].then(t,n)})},r._setImmediateFn=function(e){u=e},r._setUnhandledRejectionFn=function(e){p=e},"undefined"!=typeof module&&module.exports?module.exports=r:e.Promise||(e.Promise=r)}(this),NodeList.prototype.forEach=Array.prototype.forEach,HTMLCollection.prototype.forEach=Array.prototype.forEach,Object.create=function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if(Array.isArray(e))var n=[];else var n={};for(var r=Object.keys(e),a=0;a<r.length;a++){var i=r[a];e[i]&&"object"===babelHelpers["typeof"](e[i])&&"[object Function]"!==Object.prototype.toString.call(e[i])?e[i].nodeType&&"cloneNode"in e[i]?n[i]=e[i]:e[i]instanceof Date?n[i]=new Date(e[i].getTime()):e[i]instanceof RegExp?n[i]=new RegExp(e[i]):"object"===babelHelpers["typeof"](e[i])?n[i]=Object.create(e[i]):n[i]=e[i]:n[i]=e[i]}return null!==t&&Object.defineProperties(n,t),n},function(){window.KEY_BACKSPACE=8,window.KEY_TAB=9,window.KEY_ENTER=13,window.KEY_SHIFT=16,window.KEY_CTRL=17,window.KEY_ALT=18,window.KEY_ESCAPE=27,window.KEY_PAGE_UP=33,window.KEY_PAGE_DOWN=34,window.KEY_ARROW_LEFT=37,window.KEY_ARROW_UP=38,window.KEY_ARROW_RIGHT=39,window.KEY_ARROW_DOWN=40,window.KEY_DELETE=46}(),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll('input[type="file"]').forEach(function(e){var t=e.getAttribute("id"),n=document.getElementById(t+"_image");null!==n&&e.addEventListener("change",function(){if(e.files&&e.files[0]){var t=new FileReader;t.addEventListener("load",function(e){n.setAttribute("src",e.target.result)}),t.readAsDataURL(e.files[0])}});var r=document.getElementById(t+"_delete_checkbox"),a=document.getElementById(t+"_delete");null!==a&&a.addEventListener("change",function(){a.checked?r.classList.add("has-danger"):r.classList.remove("has-danger")})})},!1),document.addEventListener("DOMContentLoaded",function(){document.querySelectorAll(".required").forEach(function(e){var t=e.getAttribute("for"),n=document.getElementById(t);""!==n.getAttribute("value")&&e.classList.remove("required"),n.addEventListener("input",function(){""!==n.value?e.classList.remove("required"):e.classList.add("required")})})},!1),function(){var e={},t=null,n=!1,r=[];[].forEach.call(document.forms,function(t){var n=t.getAttribute("id");e[n]={el:t,inputs:t.querySelectorAll("input, textarea, select"),changed:!1}});var a=function(a){if(n)if(null!==t){for(var i=0;i<r.length;i++)if(t!==r[i]&&e[r[i]].changed){a.returnValue=1;break}}else a.returnValue=1};window.addEventListener("beforeunload",a),document.addEventListener("DOMContentLoaded",function(){for(var a in e)e[a].inputs.forEach(function(t){t.addEventListener("change",function(t){e[a].changed=!0,r.push(a),n=!0})}),e[a].el.addEventListener("submit",function(){t=a})},!1)}();var Route$1={_routes:[],_routeSegments:{},is:function(e){var t=arguments.length<=1||void 0===arguments[1]?window.location.pathname:arguments[1],n=t.split("/"),r=e.split("/"),a=n.length,i=r.length;if(a!==i)return!1;for(var o=1;a>o;o++)if(-1===r[o].indexOf("{")&&r[o]!==n[o])return!1;return!0},params:function e(t){for(var n=window.location.pathname.split("/"),r=t.split("/"),a=r.length,e={},i=1;a>i;i++)if(-1!==r[i].indexOf("{")){var o=r[i].substr(1,r[i].length-2);e[o]=n[i]}return e},get:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=this.defined(e);return r!==!1?!1:void(this._routes[e]={handler:t,method:n})},defined:function(e){if(void 0!==this._routes[e])return e;for(var t in this._routes)if(this.is(t,e))return t;return!1},call:function(e){var t=this.defined(e);if(t===!1)return!1;if(null===this._routes[t].method){var n=this._routes[t].handler.bind(this._routes[t].handler);n(this.params(t))}else{var r=this._routes[t].handler,a=this._routes[t].method;r[a](this.params(t))}},to:function(e){if(!this.defined(e))return!1;history.pushState(null,null,e);var t=new CustomEvent("onRouteChange");t.route=e,document.dispatchEvent(t,e)}};document.addEventListener("DOMContentLoaded",function(){Route$1.defined(window.location.pathname)&&Route$1.call(window.location.pathname)},!1),document.addEventListener("onRouteChange",function(e){Route$1.defined(e.route)&&Route$1.call(e.route)},!1);var Route=Object.create(Route$1);Route.get=function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2];return""!==Server.app.localePrefix&&(e="/"===e?Server.app.localePrefix:Server.app.localePrefix+e),Route$1.get(e,t,n)};var Ajax={create:function(e,t,n,r){var a=arguments.length<=4||void 0===arguments[4]?null:arguments[4],i=arguments.length<=5||void 0===arguments[5]?{}:arguments[5],o=arguments.length<=6||void 0===arguments[6]?!0:arguments[6],s=Object.create(this);return s.method=e,s.url=t,s.data=n,s.request=new XMLHttpRequest,s.onSuccess=r,s.onError=a,s.headers=i,s.request.onreadystatechange=function(){s.request.readyState===XMLHttpRequest.DONE&&(200===s.request.status?s.onSuccess(s.request.responseText):null!==s.onError&&s.onError(s.request.responseText,s.request.status))},o&&s.send(),s},send:function(){this.request.open(this.method,this.url);for(var e in this.headers)this.request.setRequestHeader(e,this.headers[e]);var t="";for(var n in this.data)t=t+n+"="+encodeURIComponent(this.data[n])+"&";this.request.send(t)},sendForm:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{"Content-Type":"application/x-www-form-urlencoded"}:arguments[3],a={};e.querySelectorAll("[name]").forEach(function(e){a[e.getAttribute("name")]=e.value}),this.create("POST",e.getAttribute("action"),a,t,n,r,!0)},sendFormWithFiles:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{"Content-Type":"multipart/form-data"}:arguments[3];this.sendForm(e,t,n,r)},get:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{"X-Requested-With":"XMLHttpRequest"}:arguments[3];this.create("GET",e,{},t,n,r,!0)}},TEMPLATE_EVENT_FORMAT_DATA="format_data",Template={_loadedTemplates:[],_dataVarName:"v",_dataAttrVarName:"av",define:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(void 0!==this._loadedTemplates[e])return!1;var r=document.getElementById(e);if(null===r)return!1;var a=document.createDocumentFragment(),i=null;for(i="TABLE"===r.tagName?r.querySelector("tbody"):r;i.firstChild;)a.appendChild(i.firstChild);return this._loadedTemplates[e]={templateFragment:a,handlers:t,events:n,isTable:"TABLE"===r.tagName},!0},isTable:function(e){return this._loadedTemplates[e].isTable},create:function(e,t){var n={},r=[],a=this._dataVarName,i=this._dataAttrVarName;return void 0===this._loadedTemplates[e]?!1:(n.id=e,n.content=this._loadedTemplates[e].templateFragment.cloneNode(!0),n.nodes=[].slice.call(n.content.childNodes,0),n.isTable="TABLE"===this._loadedTemplates[e].tagName,n.varElements=[],n.content.querySelectorAll("["+a+"]").forEach(function(e){n.varElements[e.getAttribute(a)]=e}),n.attrVarElements=[],n.content.querySelectorAll("["+i+"]").forEach(function(e){r=e.getAttribute(i).split(":"),n.attrVarElements[r[1]]={el:e,attr:r[0]}}),n.handlerElements=[],n.content.querySelectorAll("[data-handler]").forEach(function(e){n.handlerElements.push(e)}),void 0!==t&&(n.relatedData=t),n)},parse:function(e,t){var n=Object.create(t);if(void 0===e||null===e)e=[];else if("object"!==("undefined"==typeof e?"undefined":babelHelpers["typeof"](e)))return!1;void 0!==this._loadedTemplates[n.id].events[TEMPLATE_EVENT_FORMAT_DATA]&&(e=this._loadedTemplates[n.id].events[TEMPLATE_EVENT_FORMAT_DATA](e,n.relatedData)),n.escapedData=[];for(var r in e)n.escapedData[r]=this.nl2br(this.escape(e[r])),void 0!==n.varElements[r]&&(n.varElements[r].innerHTML=n.escapedData[r]),void 0!==n.attrVarElements[r]&&n.attrVarElements[r].el.setAttribute(n.attrVarElements[r].attr,e[r]);return n},escape:function(e){return String(e).replace(/&amp;/g,"&").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},nl2br:function(e){return String(e).replace(/(\n)+/g,"<br>")},callHandlers:function(e){for(var t in e.handlerElements){var n=this._loadedTemplates[e.id].handlers[e.handlerElements[t].getAttribute("data-handler")];if(void 0===n)return!1;n(e.handlerElements[t],e.escapedData,e.nodes)}},append:function(e,t){if(null===t||void 0===t)return!1;var n=null;return n=this.isTable(e.id)?t.querySelector("tbody"):t,n.appendChild(e.content),this.callHandlers(e),e.nodes},insert:function(e,t,n){return this.append(this.parse(t,this.create(e)),n)},insertAll:function(e,t,n){for(var r=document.createDocumentFragment(),a=[],i=0;i<t.length;i++){var o=this.create(e);o=this.parse(t[i],o),r.appendChild(o.content),a.push(o)}var s=null;for(s=this.isTable(e)?n.querySelector("tbody"):n,s.appendChild(r),i=0;i<a.length;i++)this.callHandlers(a[i])},insertAdjacencyList:function(e,t,n,r,a,i){void 0!==r&&null!==r||(r="parent_id"),(void 0===i||null===i||"asc"!==i&&"desc"!==i)&&(i="asc");var o={_0:{}};o._0._rendered=!1,o._0.id=0;for(var s in t)o["_"+t[s].id]=t[s],o["_"+t[s].id]._rendered=!1;for(var s in t){var l=o["_"+t[s].id][r];void 0===o["_"+l]._children_ids&&(o["_"+l]._children_ids=[]),o["_"+l]._children_ids.push(t[s].id)}var d=document.createDocumentFragment(),c=[],u=function m(t,n){if(t._rendered===!1)if(t._rendered=!0,0===t.id)for(var r in t._children_ids)m(o["_"+t._children_ids[r]],n);else{var i=p(t),s=Template.create(e,i);if(s=Template.parse(t,s),c.push(s),void 0!==t._children_ids)for(var r in t._children_ids)null===s.content.querySelector("."+a),m(o["_"+t._children_ids[r]],s.content.querySelector("."+a));n.appendChild(s.content)}},p=function h(e){if(e.parent_id>0){var t={};return t=o["_"+e.parent_id],o["_"+e.parent_id].parent_id>0&&(t.parent=h(o["_"+e.parent_id])),t}};for(u(o._0,d),n.appendChild(d),s=0;s<c.length;s++)this.callHandlers(c[s])}},Paginator={create:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?7:arguments[2];return{_id:e,count:t.to-t.from+1,currentPage:t.current_page,hasMorePages:!1,lastPage:t.last_page,nextPageUrl:t.next_page_url,perPage:t.per_page,previousPageUrl:t.prev_page_url,total:t.total,from:t.from,to:t.to,url:function r(e){var r="",n=1;return null!==t.next_page_url?(r=t.next_page_url,n=t.current_page+1):(r=t.prev_page_url,n=t.current_page-1),r.replace("page="+n,"page="+e)},createButton:function(e,t,n){var r=document.createElement("li");r.className=t;var a=document.createElement("a");return a.setAttribute("href",e),a.className="page-link",a.innerHTML=n,r.appendChild(a),r},redraw:function(){var e=document.getElementById(this._id+"_pagination"),t=document.createDocumentFragment(),r="";r=1===this.currentPage?"page-item disabled":"page-item",t.appendChild(this.createButton(this.url(1),r,"First")),t.appendChild(this.createButton(this.previousPageUrl,r,"< Previous"));for(var a=1;a<=this.lastPage;a++){var i=Math.floor(n/2),o=this.currentPage-i,s=this.currentPage+i;if(this.currentPage<i&&(s+=i-this.currentPage),this.lastPage-this.currentPage<i&&(o-=i-(this.lastPage-this.currentPage)-1),a>o&&s>a){var l=document.createElement("li");this.currentPage===a?l.className="page-item active":l.className="page-item";var d=document.createElement("a");d.setAttribute("href",this.url(a)),d.className="page-link",d.innerHTML=a,l.appendChild(d),t.appendChild(l)}}for(r=this.currentPage===this.lastPage?"page-item disabled":"page-item",t.appendChild(this.createButton(this.nextPageUrl,r,"Next >")),t.appendChild(this.createButton(this.url(this.lastPage),r,"Last"));e.firstChild;)e.removeChild(e.firstChild);e.appendChild(t)},updateStats:function(){document.getElementById(this._id+"_stats_count").innerHTML=this.count,document.getElementById(this._id+"_stats_from").innerHTML=this.from,document.getElementById(this._id+"_stats_to").innerHTML=this.to,document.getElementById(this._id+"_stats_cur_page").innerHTML=this.currentPage,document.getElementById(this._id+"_stats_last_page").innerHTML=this.lastPage}}}},Container={_bindings:{},bind:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];if(this.isBound(e)){if(!n)return!1;this._bindings[e]=t}else this._bindings[e]=t},get:function(e){return void 0!==this._bindings[e]?this._bindings[e]:!1},isBound:function(e){return void 0!==this._bindings[e]},getRegisteredBindings:function(){var e=[];for(var t in this._bindings)e.push(t);return e}};Container.bind("bunny.ajax",Ajax),Container.bind("bunny.template",Template),Container.bind("bunny.paginator",Paginator);var DataTable={_tables:[],_paginationLimit:7,define:function(e,t){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];if(null===document.getElementById(t))return 0;var a=document.getElementById(e);if(null===a)return!1;if("TABLE"!==a.tagName)return!1;var i=e+"_pagination",o=document.getElementById(i);if(null===o)return!1;var s=e+"_stats",l=document.getElementById(s);return Container.get("bunny.template").define(t,n,r),this._tables[e]={table:a,pagination:o,stats:l,row_tpl_id:t,handlers:[]},this.addBtnListeners(e),!0},addBtnListeners:function(e){var t=this,n=this._tables[e].pagination;n.querySelectorAll(".page-link").forEach(function(n){n.addEventListener("click",function(r){r.preventDefault();var a=n.getAttribute("href");t.changePage(e,a)})})},changePage:function(e,t){var n=this._tables[e].row_tpl_id,r=this._tables[e].table,a=this;Container.get("bunny.ajax").get(t,function(t){for(var i=JSON.parse(t),o=r.rows.length,s=o-1;s>0;s--)r.deleteRow(s);Container.get("bunny.template").insertAll(n,i.data,r),a.updatePagination(e,i),a._tables[e].handlers.forEach(function(e){e(r)})})},updatePagination:function(e,t){var n=Container.get("bunny.paginator").create(e,t,this._paginationLimit);n.redraw(),n.updateStats(),this.addBtnListeners(e)},onRedraw:function(e,t){this._tables[e].handlers.push(t)}},Element={getCurrentDocumentPosition:function(){return Math.abs(document.body.getBoundingClientRect().y)},getPosition:function(e){var t=0;if(e.offsetParent){do t+=e.offsetTop;while(e=e.offsetParent);return t}return 0},scrollTo:function(e){function t(e){c=e-d,window.scrollTo(0,o.easing(c,i,s,l)),l>c?requestAnimationFrame(t):n()}function n(){window.scrollTo(0,i+s),"function"==typeof o.callback&&o.callback()}function r(e,t,n,r){return e/=r/2,1>e?n/2*e*e+t:(e--,-n/2*(e*(e-2)-1)+t)}var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=window.pageYOffset,o={duration:a.duration||750,offset:a.offset||0,callback:a.callback,easing:a.easing||r},s=0;s="string"==typeof e?o.offset+document.querySelector(e).getBoundingClientRect().top:"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))?e.getBoundingClientRect().top:e;var l=0;l="function"==typeof o.duration?o.duration(s):o.duration;var d=0,c=0;s+=o.offset,requestAnimationFrame(function(e){d=e,t(e)})}},Validate={errorClass:"has-danger",formGroupClass:"form-group",formLabelClass:"form-control-label",errorContainerTag:"small",errorContainerClass:"text-help",lang:{required:"Field '%s' ir required!",tel:"Field '%s' is not a valid telephone number!",email:"Field '%s' should be a valid e-mail address!",image:"Uploaded file '%s' should be an image (jpeg, png, bmp, gif, or svg)",maxlength:"Input '%s' length is too long, must be < '%maxlength'",minlength:"Input '%s' length is too short, must be > '%minlength'"},insertErrorContainer:function(e,t){return e.appendChild(t)},toggleErrorClass:function(e){e.classList.contains(this.errorClass)?e.classList.remove(this.errorClass):e.classList.add(this.errorClass)},createErrorContainer:function(){var e=document.createElement(this.errorContainerTag);return e.setAttribute("class",this.errorContainerClass),e},getErrorContainer:function(e){return e.querySelector("."+this.errorContainerClass)},removeErrorContainer:function(e){var t=this.getErrorContainer(e);null!==t&&(t.parentNode.removeChild(t),this.toggleErrorClass(e))},setErrorMessage:function(e,t){if("string"==typeof e)var n=document.getElementById(e);else var n=e;var r=this.getErrorContainer(n);if(null===r){var a=this.createErrorContainer();this.toggleErrorClass(n),a.innerHTML=t,this.insertErrorContainer(n,a)}else r.innerHTML=t},validators:{maxlength:function(e){return null!==e.getAttribute("maxlength")&&e.value.length>e.getAttribute("maxlength")?{maxlength:e.getAttribute("maxlength")}:!0},minlength:function(e){return null!==e.getAttribute("minlength")&&e.value.length<e.getAttribute("minlength")?{minlength:e.getAttribute("minlength")}:!0},image:function(e){if("file"===e.getAttribute("type")&&"image/*"===e.getAttribute("accept")){if(0!==e.files.length){var t=["image/jpeg","image/png","image/bmp","image/gif","image/svg+xml"];return t.indexOf(e.files[0].type)>-1}return!0}return!0},email:function(e){if(e.value.length>0&&"email"===e.getAttribute("type")){var t=/[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;return t.test(e.value)}return!0},tel:function(e){if(e.value.length>0&&"tel"===e.getAttribute("type")){var t=/^[0-9\-\+\(\)\#\ \*]{6,20}$/;return t.test(e.value)}return!0},required:function(e){return null!==e.getAttribute("required")?""!==e.value:!0}},validate:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2],r=e,a=this;r.setAttribute("novalidate",""),r.addEventListener("submit",function(e){e.preventDefault();var i=!0,o=!1;r.querySelectorAll("."+a.formGroupClass).forEach(function(e){if(a.isFormGroupForInput(e)){var n=a.checkInput(e);n.valid===!1?(i=!1,a.setErrorMessage(e,n.msg),o||(void 0!==t.on_focus?t.on_focus(n.inputElements.input,e):a.focus(n.inputElements.input),o=!0)):a.removeErrorContainer(e)}}),i&&(void 0===n?r.submit():n())},!1)},getInputElementsByFormGroup:function(e){if("string"==typeof e)var t=document.getElementById(e);else var t=e;var n=t.querySelector("[name]"),r=t.getElementsByTagName("label")[0];return void 0===r&&(r=null),{formGroup:t,input:n,label:r}},isFormGroupForInput:function(e){var t=this.getInputElementsByFormGroup(e);return null!==t.input},_checkInputAgainstValidator:function(e,t,n){if(void 0===this.validators[n])return{valid:!1,msg:"ERROR: Validator not found"};var r=this.validators[n](e),a=!1,i={},o=!0,s="";if("boolean"!=typeof r)for(var l in r)a=!1,i[l]=r[l];else a=r;if(!a){var d="";if(null===t){var c=e.getAttribute("placeholder");null!==c&&(d=c)}else d=t.innerHTML;s=this.lang[n].replace("%s",d);for(var u in i)s=s.replace("%"+u,i[u]);o=!1}return{valid:o,msg:s}},checkInputAgainstValidator:function(e,t){var n=this.getInputElementsByFormGroup(e);return this._checkInputAgainstValidator(n.input,n.label,t)},checkInput:function(e){if("string"==typeof e)var t=document.getElementById(e);else var t=e;var n=this.getInputElementsByFormGroup(t),r=!0,a="";for(var i in this.validators){var o=this._checkInputAgainstValidator(n.input,n.label,i);if(o.valid===!1){r=!1,a=o.msg;break}}return{valid:r,msg:a,inputElements:n}},validateSection:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=this,r=!0,a=!1;return e.querySelectorAll("."+this.formGroupClass).forEach(function(e){if(n.isFormGroupForInput(e)){var i=n.checkInput(e);i.valid===!1?(r=!1,n.setErrorMessage(e,i.msg),a||(void 0!==t.on_focus?t.on_focus(i.inputElements.input,e):n.focus(i.inputElements.input),a=!0)):n.removeErrorContainer(e)}}),r},focus:function(e){e.focus(),e.scrollIntoView(!1)}},TabList={_tabContents:{},define:function(e){var t=document.getElementById(e);if(null===t)return!1;var n=null,r=null,a=null,i=[],o=[];t.querySelectorAll('[role="tabpanel"]').forEach(function(e){if(""===e.id)return!1;e.classList.contains("active")&&(r=e);for(var t=null,s=0;s<document.links.length;s++)if(document.links[s].getAttribute("href")==="#"+e.id){t=document.links[s],n=t.parentNode.parentNode,a=n.getElementsByClassName("active")[0],o=n.getElementsByTagName("a");break}i[e.id]={el:e,nav:t}}),this._tabContents[e]={el:t,tabPanels:i,tabList:n,tabListLinks:o,activeTabPanel:r,activeLink:a},this.assignTabLinkClickEvent(e)},assignTabLinkClickEvent:function(e){var t=this;this.get(e).tabListLinks.forEach(function(e){var n=e.getAttribute("href").substring(1);e.addEventListener("click",function(e){e.preventDefault(),t.changeTab(n)})})},getTabContentIdByTabPanelId:function(e){for(var t in this._tabContents)if(void 0!==this._tabContents[t].tabPanels[e])return t;return!1},changeTab:function(e){var t=this.getTabContentIdByTabPanelId(e);if(t===!1)return!1;var n=this.get(t),r=n.activeTabPanel,a=n.activeLink,i=n.tabPanels[e].nav;null!==a&&(a.setAttribute("aria-expanded","false"),a.classList.remove("active"),i.setAttribute("aria-expanded","true"),i.classList.add("active")),r.classList.contains("fade")?(r.classList.remove("in"),setTimeout(function(){r.setAttribute("aria-expanded","false"),r.classList.remove("active")},150)):(r.setAttribute("aria-expanded","false"),r.classList.remove("active"));var o=document.getElementById(e);o.classList.contains("fade")?setTimeout(function(){o.setAttribute("aria-expanded","true"),o.classList.add("active"),o.classList.add("in")},150):(o.setAttribute("aria-expanded","true"),o.classList.add("active")),null!==a&&(n.activeLink=i),n.activeTabPanel=o},get:function(e){return void 0===this._tabContents[e]?!1:this._tabContents[e]}};document.addEventListener("DOMContentLoaded",function(){document.getElementsByClassName("tab-content").forEach(function(e){TabList.define(e.id)})},!1);var CalendarDate={getDaysInMonth:function(e,t){return new Date(e,t+1,0).getDate()},getWeeksInMonth:function(e,t){return 0===this.getDayOfWeekOfFirstMonthDay(e,t)&&28===this.getDaysInMonth(e,t)?4:5},getDayOfWeekOfFirstMonthDay:function(e,t){var n=new Date(e,t).getDay();return 0===n&&(n=7),n-1},getMonthMatrix:function(e,t){for(var n=this.getDayOfWeekOfFirstMonthDay(e,t),r=this.getDaysInMonth(e,t),a=this.getWeeksInMonth(e,t),i=[],o=1,s=0;a>s;s++){i[s]=[];for(var l=0;7>l;l++){document.createElement("td");0==s?l>=n?(i[s][l]=o,o++):i[s][l]=null:s==a-1?r>=o?(i[s][l]=o,o++):i[s][l]=null:(i[s][l]=o,o++)}}return i},getCurrentDate:function(){var e=new Date,t=e.getUTCFullYear(),n=e.getUTCMonth(),r=e.getUTCDate();return{year:t,monthIndex:n,day:r}}},CalendarMarkup={lang:{daysOfWeeks:["Mon","Thu","Wed","Thr","Fri","Sat","Sun"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},createTableHead:function(){for(var e=document.createElement("div"),t=document.createElement("div"),n=[],r=0;7>r;r++){var a=document.createElement("div");a.innerHTML=this.lang.daysOfWeeks[r],n.push(a),t.appendChild(a)}return e.appendChild(t),{thead:e,row:t,thCollection:n}},createTableBody:function(e,t){for(var n=arguments.length<=2||void 0===arguments[2]?null:arguments[2],r=CalendarDate.getMonthMatrix(e,t),a=document.createElement("div"),i=[],o=null,s=null,l=CalendarDate.getCurrentDate(),d=[],c=[],u=0;u<r.length;u++){var p=document.createElement("div");c.push(p),a.appendChild(p);for(var m=0;m<r[u].length;m++){var h=document.createElement("div");null===r[u][m]?i.push(h):(h.innerHTML=r[u][m],d.push(h),null!==n&&r[u][m]==n&&(o=h),l.year===e&&l.monthIndex===t&&l.day===r[u][m]&&(s=h)),p.appendChild(h)}}return{tbody:a,rowCollection:c,tdCollection:d,inactiveTdCollection:i,currentTd:o,currentDateTd:s}},createEmptyTable:function(){var e=document.createElement("div");return e},createPrevButton:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=document.createElement("div");return t.innerHTML=e,t},createNextButton:function(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0],t=document.createElement("div");return t.innerHTML=e,t},createMonthSelect:function(){for(var e=arguments.length<=0||void 0===arguments[0]?0:arguments[0],t=document.createElement("select"),n=0;n<this.lang.months.length;n++){var r=document.createElement("option");r.setAttribute("value",n),r.innerHTML=this.lang.months[n],n==e&&r.setAttribute("selected",1),t.appendChild(r)}return t},createYearSelect:function(){for(var e=arguments.length<=0||void 0===arguments[0]?2e3:arguments[0],t=arguments.length<=1||void 0===arguments[1]?1950:arguments[1],n=arguments.length<=2||void 0===arguments[2]?2050:arguments[2],r=document.createElement("select"),a=t;n>=a;a++){var i=document.createElement("option");i.setAttribute("value",a),i.innerHTML=a,a==e&&i.setAttribute("selected",!0),r.appendChild(i)}return r},createEmptyHeader:function(){var e=document.createElement("header");return e},createEmptyCalendar:function(){var e=document.createElement("calendar");return e}},CalendarDecorator={theme:{def:{classPrefix:"bny-",calendarClass:"cal",headerClass:"cal-header",monthClass:"cal-month",yearClass:"cal-year",prevButtonClass:"cal-prev",nextButtonClass:"cal-next",tableClass:"cal-table",tableHeadClass:"cal-head",tableHeadDayOfWeekClass:"cal-day-of-week",tableBodyClass:"cal-body",tableRowClass:"cal-row",weekClass:"cal-week",dayClass:"cal-day",dayInactiveClass:"cal-day-inactive",dayCurrentClass:"cal-day-current",currentDateClass:"cal-day-today",popupClass:"cal-popup",popupBodyFadeClass:"cal-popup-body-fade"}},buildClass:function(e){var t=arguments.length<=1||void 0===arguments[1]?"def":arguments[1];return this.theme[t].classPrefix+this.theme[t][e+"Class"]},decorateTableHead:function(e,t,n){e.classList.add(this.buildClass("tableHead")),t.classList.add(this.buildClass("tableRow"));for(var r=0;r<n.length;r++)n[r].classList.add(this.buildClass("tableHeadDayOfWeek"))},decorateTableBody:function(e,t,n,r,a,i){e.classList.add(this.buildClass("tableBody"));for(var o=0;o<t.length;o++)t[o].classList.add(this.buildClass("tableRow")),t[o].classList.add(this.buildClass("week"));for(o=0;o<n.length;o++)n[o].classList.add(this.buildClass("day"));for(o=0;o<r.length;o++)r[o].classList.add(this.buildClass("dayInactive"));null!==a&&a.classList.add(this.buildClass("dayCurrent")),null!==i&&i.classList.add(this.buildClass("currentDate"))},setCurrentDay:function(e,t){for(var n=0;n<e.length;n++)e[n].innerHTML==t?e[n].classList.add(this.buildClass("dayCurrent")):e[n].classList.contains(this.buildClass("dayCurrent"))&&e[n].classList.remove(this.buildClass("dayCurrent"));
},decorateTable:function(e){e.classList.add(this.buildClass("table"))},decoratePrevButton:function(e){e.classList.add(this.buildClass("prevButton"))},decorateNextButton:function(e){e.classList.add(this.buildClass("nextButton"))},decorateMonthSelect:function(e){e.classList.add(this.buildClass("month"))},decorateYearSelect:function(e){e.classList.add(this.buildClass("year"))},decorateHeader:function(e){e.classList.add(this.buildClass("header"))},decorateCalendar:function(e){e.classList.add(this.buildClass("calendar"))},decorateCalendarPopup:function(e){e.classList.add(this.buildClass("popup")),document.body.classList.add(this.buildClass("popupBodyFade"))},undecorateCalendarPopup:function(e){e.classList.remove(this.buildClass("popup")),document.body.classList.remove(this.buildClass("popupBodyFade"))}},CalendarController={attachDayClickEvent:function(e){for(var t=Calendar._calendars[e].tableBody.tdCollection,n=0;n<t.length;n++)t[n].addEventListener("click",function(){Calendar.pickDay(e,Calendar._calendars[e].displayedYear,Calendar._calendars[e].displayedMonthIndex,this.innerHTML)})},attachMonthSelectEvent:function(e){Calendar._calendars[e].headerMonthSelect.addEventListener("change",function(){Calendar.changeMonth(e,Calendar._calendars[e].displayedYear,this.value)})},attachYearSelectEvent:function(e){Calendar._calendars[e].headerYearSelect.addEventListener("change",function(){Calendar.changeMonth(e,this.value,Calendar._calendars[e].displayedMonthIndex)})},attachPrevClickEvent:function(e){Calendar._calendars[e].headerPrevButton.addEventListener("click",function(){0===Calendar._calendars[e].displayedMonthIndex?Calendar.changeMonth(e,Calendar._calendars[e].displayedYear-1,11):Calendar.changeMonth(e,Calendar._calendars[e].displayedYear,Calendar._calendars[e].displayedMonthIndex-1)})},attachNextClickEvent:function(e){Calendar._calendars[e].headerNextButton.addEventListener("click",function(){11===Calendar._calendars[e].displayedMonthIndex?Calendar.changeMonth(e,Calendar._calendars[e].displayedYear+1,0):Calendar.changeMonth(e,Calendar._calendars[e].displayedYear,Calendar._calendars[e].displayedMonthIndex+1)})},attachCloseOnOutsideClickEvent:function(e){document.addEventListener("click",function(){Calendar.isHidden(e)||Calendar.hide(e)}),Calendar.getCalendar(e).addEventListener("click",function(e){e.stopPropagation()})}},Calendar={_calendars:{},create:function(){var e=arguments.length<=0||void 0===arguments[0]?"datepicker":arguments[0],t=arguments.length<=1||void 0===arguments[1]?1950:arguments[1],n=arguments.length<=2||void 0===arguments[2]?2050:arguments[2],r=arguments.length<=3||void 0===arguments[3]?null:arguments[3],a=arguments.length<=4||void 0===arguments[4]?null:arguments[4],i=arguments.length<=5||void 0===arguments[5]?null:arguments[5],o=CalendarDate.getCurrentDate();null===r&&(r=o.year),null===a&&(a=o.monthIndex),null===i&&(i=o.day);var s=CalendarMarkup.createEmptyCalendar();CalendarDecorator.decorateCalendar(s);var l=CalendarMarkup.createEmptyHeader();CalendarDecorator.decorateHeader(l);var d=CalendarMarkup.createPrevButton();CalendarDecorator.decoratePrevButton(d);var c=CalendarMarkup.createNextButton();CalendarDecorator.decorateNextButton(c);var u=CalendarMarkup.createMonthSelect(a);CalendarDecorator.decorateMonthSelect(u);var p=CalendarMarkup.createYearSelect(r,t,n);CalendarDecorator.decorateYearSelect(p),l.appendChild(d),l.appendChild(u),l.appendChild(p),l.appendChild(c);var m=CalendarMarkup.createEmptyTable();CalendarDecorator.decorateTable(m);var h=CalendarMarkup.createTableHead();CalendarDecorator.decorateTableHead(h.thead,h.row,h.thCollection);var v=CalendarMarkup.createTableBody(r,a,i);return CalendarDecorator.decorateTableBody(v.tbody,v.rowCollection,v.tdCollection,v.inactiveTdCollection,v.currentTd,v.currentDateTd),m.appendChild(h.thead),m.appendChild(v.tbody),s.appendChild(l),s.appendChild(m),this._calendars[e]={selectedYear:r,selectedMonthIndex:a,selectedDay:i,displayedYear:r,displayedMonthIndex:a,minYear:t,maxYear:n,calendar:s,header:l,headerPrevButton:d,headerMonthSelect:u,headerYearSelect:p,headerNextButton:c,table:m,tableHead:h,tableBody:v,onPickHandlers:[]},CalendarController.attachPrevClickEvent(e),CalendarController.attachNextClickEvent(e),CalendarController.attachMonthSelectEvent(e),CalendarController.attachYearSelectEvent(e),CalendarController.attachDayClickEvent(e),CalendarController.attachCloseOnOutsideClickEvent(e),s},changeMonth:function(e,t,n){var r=this._calendars[e];if(t<r.minYear||t>r.maxYear)return!1;var a=null;t==r.selectedYear&&n==r.selectedMonthIndex&&(a=r.selectedDay),r.displayedYear=t,r.displayedMonthIndex=n;var i=CalendarMarkup.createTableBody(t,n,a);CalendarDecorator.decorateTableBody(i.tbody,i.rowCollection,i.tdCollection,i.inactiveTdCollection,i.currentTd,i.currentDateTd),r.tableBody.tbody.parentNode.removeChild(r.tableBody.tbody),r.tableBody=i,r.table.appendChild(i.tbody),r.headerYearSelect.querySelector("option[selected]").removeAttribute("selected"),r.headerYearSelect.querySelector('option[value="'+t+'"]').setAttribute("selected","selected"),r.headerYearSelect.value=t,r.headerMonthSelect.querySelector("option[selected]").removeAttribute("selected"),r.headerMonthSelect.options[n].setAttribute("selected","selected"),r.headerMonthSelect.value=n,CalendarController.attachDayClickEvent(e)},pickDay:function(e,t,n,r){this._calendars[e].selectedYear=t,this._calendars[e].selectedMonthIndex=n,this._calendars[e].selectedDay=r,CalendarDecorator.setCurrentDay(this._calendars[e].tableBody.tdCollection,r);for(var a=0;a<this._calendars[e].onPickHandlers.length;a++){var i=parseInt(n)+1,t=parseInt(t),r=parseInt(r);this._calendars[e].onPickHandlers[a](t,i,r)}},onPick:function(e,t){this._calendars[e].onPickHandlers.push(t)},getCalendar:function(e){return this._calendars[e].calendar},show:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t&&CalendarDecorator.decorateCalendarPopup(this._calendars[e].calendar),this._calendars[e].calendar.classList.remove("hidden")},hide:function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];t&&CalendarDecorator.undecorateCalendarPopup(this._calendars[e].calendar),this._calendars[e].calendar.classList.add("hidden")},isHidden:function(e){return this._calendars[e].calendar.classList.contains("hidden")}},DatePicker={_pickers:{},_options:{minYear:1950,maxYear:2050,popup:!1,onlyAsNativeFallback:!0},create:function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];for(var n in this._options)void 0===t[n]&&(t[n]=this._options[n]);if(t.onlyAsNativeFallback&&this.isNativeDatePickerSupported())return 2;var r=this,a=document.getElementById(e),i=a.name;a.id="_"+e,a.name="_"+i;var o=document.createElement("input");o.id=e,o.name=i,o.type="hidden",a.parentNode.insertBefore(o,a.nextSibling);var s=e+"_calendar";if(""!==a.value){o.value=r.getSqlDateFromEuropeanDate(a.value);var l=this.getDatePartsFromISODate(o.value);Calendar.create(s,t.minYear,t.maxYear,l.year,l.monthIndex,l.day)}else Calendar.create(s,t.minYear,t.maxYear);return Calendar.hide(s,t.popup),Calendar.onPick(s,function(e,n,i){o.value=r.getSqlDateFromDateParts(e,n-1,i),a.value=r.getEuropeanDateFromDateParts(e,n-1,i),Calendar.hide(s,t.popup)}),a.addEventListener("focus",function(){Calendar.show(s,t.popup)}),a.addEventListener("click",function(e){e.stopPropagation()}),a.parentNode.insertBefore(Calendar.getCalendar(s),a.nextSibling),this._pickers[e]={input:a,options:t},1},twoDigits:function(e){return 10>e?"0"+e:e},getDatePartsFromISODate:function(e){var t=new Date(e);return{year:t.getUTCFullYear(),monthIndex:t.getUTCMonth(),month:t.getUTCMonth()+1,monthStr:this.twoDigits(t.getUTCMonth()+1),day:t.getUTCDate(),dayStr:this.twoDigits(t.getUTCDate())}},getISODateFromDateParts:function(e,t,n){var r=parseInt(t)+1,a=this.twoDigits(r),i=this.twoDigits(n);return e+"-"+a+"-"+i},getSqlDateFromISODate:function(e){return e},getSqlDateFromDateParts:function(e,t,n){return this.getISODateFromDateParts(e,t,n)},getSqlDateFromEuropeanDate:function(e){if(/\d{2}(\.)\d{2}(\.)\d{4}/.test(e)){var t=e.split(".");return t[2]+"-"+t[1]+"-"+t[0]}return""},getEuropeanDateFromSqlDate:function(e){if(/\d{4}(\-)\d{2}(\-)\d{2}/.test(e)){var t=e.split("-");return t[2]+"."+t[1]+"."+t[0]}return""},getEuropeanDateFromISODate:function(e){var t=this.getDatePartsFromISODate(e);return t.dayStr+"."+t.monthStr+"."+t.year},getEuropeanDateFromDateParts:function(e,t,n){var r=parseInt(t)+1,a=this.twoDigits(r),i=this.twoDigits(n);return i+"."+a+"."+e},isNativeDatePickerSupported:function(){var e=document.createElement("input");e.setAttribute("type","date");var t="not-a-date";return e.setAttribute("value",t),e.value!==t}},AutocompleteMarkup={createEmptyDropdown:function(){var e=document.createElement("div");return e},createDropdownItem:function(e,t){var n=document.createElement("button");return n.setAttribute("type","button"),n.setAttribute("value",e),n.textContent=t,n},createDropdownItemsFromData:function(e){var t=arguments.length<=1||void 0===arguments[1]?null:arguments[1],n=document.createDocumentFragment();for(var r in e){var a=this.createDropdownItem(r,e[r]);null!==t&&t(a,r,e[r]),n.appendChild(a)}return n},removeDropdown:function(e){null!==e.parentNode&&e.parentNode.removeChild(e)},insertDropdown:function(e,t){var n=e.getElementsByTagName("input")[0];n.parentNode.insertBefore(t,n.nextSibling)}},AutocompleteDecorator={theme:{bs4:{classPrefix:"",dropdownClass:["dropdown-menu","w-100"],dropdownItemClass:"dropdown-item",showClass:"open"}},buildClass:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?!1:arguments[3],a=this.theme[n][t+"Class"];if("string"==typeof a)r?e.classList.remove(a):e.classList.add(a);else for(var i=0;i<a.length;i++)r?e.classList.remove(a[i]):e.classList.add(a[i])},decorateDropdown:function(e){var t=arguments.length<=1||void 0===arguments[1]?"bs4":arguments[1];this.buildClass(e,"dropdown",t)},decorateDropdownItem:function(e){var t=arguments.length<=1||void 0===arguments[1]?"bs4":arguments[1];this.buildClass(e,"dropdownItem",t)},showDropdown:function(e){var t=arguments.length<=1||void 0===arguments[1]?"bs4":arguments[1];this.buildClass(e,"show",t)},hideDropdown:function(e){var t=arguments.length<=1||void 0===arguments[1]?"bs4":arguments[1];this.buildClass(e,"show",t,!0)}},AutocompleteController={inputDelay:function(e,t){var n=0;!function(){clearTimeout(n),n=setTimeout(e,t)}()},attachInputTypeEvent:function(e){var t=arguments.length<=1||void 0===arguments[1]?JSON.parse:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=Autocomplete.get(e),a=0;r._picked=!1,r.input.addEventListener("input",function(){var i=this;clearTimeout(a),i.value.length>=r.options.minCharLimit&&(a=setTimeout(function(){var a=r.ajaxUrl.replace("{search}",encodeURI(i.value));Ajax.get(a,function(n){var r=t(n);0!==r.length?(Autocomplete.setItems(e,r),Autocomplete.show(e)):Autocomplete.hide(e)},function(t,n){null!==r.options.ajaxErrorHandler&&r.options.ajaxErrorHandler(t,n),Autocomplete.hide(e)},n)},r.options.inputDelay))})},attachInputFocusEvent:function(e){var t=Autocomplete.get(e);t.input.addEventListener("focus",function(e){t._picked=!1,t._valueOnFocus=this.value})},attachInputOutEvent:function(e){var t=Autocomplete.get(e);t.input.addEventListener("blur",function(n){var r=this;setTimeout(function(){t._picked||(t.options.allowCustomInput?null!==t.hiddenInput&&(t.hiddenInput.value=t.options.defaultCustomHiddenInputValue):t._valueOnFocus!==r.value&&Autocomplete.restoreDefaultValue(e),Autocomplete.hide(e)),t._picked=!1},150)})},attachItemSelectEvent:function(e){for(var t=Autocomplete.get(e),n=this,r=0;r<t.dropdownItems.length;r++)t.dropdownItems[r].addEventListener("mousedown",function(t){0===t.button&&(t.preventDefault(),n.selectItem(e,this))})},selectItem:function(e,t){var n=Autocomplete.get(e),r=t.getAttribute("value");null===r&&(r=t.innerHTML),n._picked=!0,Autocomplete.hide(e),n.input.value=t.innerHTML,null!==n.hiddenInput&&(n.hiddenInput.value=r);for(var a=0;a<n.itemSelectHandlers.length;a++)n.itemSelectHandlers[a](r,t.innerHTML)},attachInputKeydownEvent:function(e){var t=Autocomplete.get(e),n=this;t.input.addEventListener("keydown",function(r){var a=r.keyCode;Autocomplete.isOpened(e)&&(9===a?null===t._currentItemIndex?n.selectItem(e,t.dropdownItems[0]):n.selectItem(e,t.dropdownItems[t._currentItemIndex]):13===a?null!==t._currentItemIndex&&n.selectItem(e,t.dropdownItems[t._currentItemIndex]):27===a?(Autocomplete.restoreDefaultValue(e),Autocomplete.hide(e),r.preventDefault()):38===a?null!==t._currentItemIndex&&t._currentItemIndex>0&&(t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t._currentItemIndex-=1,t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t.dropdownItems[t._currentItemIndex].scrollIntoView(!1)):40===a&&(null===t._currentItemIndex?(t._currentItemIndex=0,t.dropdownItems[0].classList.toggle("active")):t._currentItemIndex+1<t.dropdownItems.length&&(t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t._currentItemIndex+=1,t.dropdownItems[t._currentItemIndex].classList.toggle("active"),t.dropdownItems[t._currentItemIndex].scrollIntoView(!1))))})}},Autocomplete={_autocompleteContainers:[],_options:{theme:"bs4",minCharLimit:2,inputDelay:200,allowCustomInput:!1,defaultCustomHiddenInputValue:"",ajaxHeaders:{},ajaxErrorHandler:null},create:function(e,t,n){var r=arguments.length<=3||void 0===arguments[3]?JSON.parse:arguments[3],a=arguments.length<=4||void 0===arguments[4]?{}:arguments[4];for(var i in this._options)void 0===a[i]&&(a[i]=this._options[i]);if(-1===n.indexOf("{search}"))return!1;var o=e+"_autocomplete",s=document.getElementById(o);if(null===s)return!1;var l=document.getElementById(e),d=l.getAttribute("value");null===d&&(d="");var c=document.getElementById(t),u=null;null!==c&&(u=c.value);var p=null;this._autocompleteContainers[o]={ajaxUrl:n,container:s,input:l,hiddenInput:c,dropdown:p,dropdownItems:[],itemSelectHandlers:[],defaultValue:d,defaultHiddenValue:u,dataHandler:r,_picked:!1,_onFocusValue:d,_isOpened:!1,_currentItemIndex:null,options:a},AutocompleteController.attachInputTypeEvent(o,r,a.ajaxHeaders),AutocompleteController.attachInputFocusEvent(o),AutocompleteController.attachInputOutEvent(o),AutocompleteController.attachInputKeydownEvent(o)},get:function(e){return this._autocompleteContainers[e]},setItems:function(e,t){var n=this._autocompleteContainers[e];null!==n.dropdown&&(AutocompleteMarkup.removeDropdown(n.dropdown),n.dropdownItems=[],n._currentItemIndex=null);var r=AutocompleteMarkup.createEmptyDropdown();AutocompleteDecorator.decorateDropdown(r,n.options.theme);var a=AutocompleteMarkup.createDropdownItemsFromData(t,function(e,t){AutocompleteDecorator.decorateDropdownItem(e,n.options.theme),n.dropdownItems.push(e)});r.appendChild(a),n.dropdown=r,AutocompleteMarkup.insertDropdown(n.container,r),AutocompleteController.attachItemSelectEvent(e)},show:function(e){this._autocompleteContainers[e]._isOpened=!0,AutocompleteDecorator.showDropdown(this._autocompleteContainers[e].container,this._autocompleteContainers[e].options.theme)},hide:function(e){this._autocompleteContainers[e]._isOpened=!1,AutocompleteDecorator.hideDropdown(this._autocompleteContainers[e].container,this._autocompleteContainers[e].options.theme)},isOpened:function(e){return this._autocompleteContainers[e]._isOpened},onItemSelect:function(e,t){this._autocompleteContainers[e].itemSelectHandlers.push(t)},restoreDefaultValue:function(e){var t=this.get(e);t.input.value=this.get(e).defaultValue,null!==t.defaultHiddenValue&&(t.hiddenInput.value=t.defaultHiddenValue)}};!function(){function e(e,t,n){for(var r in t){var a=t[r],i=e.input.getAttribute("data-"+r.toLowerCase());"number"==typeof a?e[r]=parseInt(i):a===!1?e[r]=null!==i:a instanceof Function?e[r]=null:e[r]=i,e[r]||0===e[r]||(e[r]=r in n?n[r]:a)}}function t(e,t){return"string"==typeof e?(t||document).querySelector(e):e||null}function n(e,t){return i.call((t||document).querySelectorAll(e))}function r(){n("input.awesomplete").forEach(function(e){new a(e)})}var a=function o(n,r){var a=this;this.input=t(n),this.input.setAttribute("autocomplete","off"),this.input.setAttribute("aria-autocomplete","list"),r=r||{},e(this,{minChars:2,maxItems:10,autoFirst:!1,filter:o.FILTER_CONTAINS,sort:o.SORT_BYLENGTH,item:o.ITEM,replace:o.REPLACE},r),this.index=-1,this.container=t.create("div",{className:"awesomplete",around:n}),this.ul=t.create("ul",{hidden:"hidden",inside:this.container}),this.status=t.create("span",{className:"visually-hidden",role:"status","aria-live":"assertive","aria-relevant":"additions",inside:this.container}),t.bind(this.input,{input:this.evaluate.bind(this),blur:this.close.bind(this),keydown:function(e){var t=e.keyCode;a.opened&&(13===t&&a.selected?(e.preventDefault(),a.select()):27===t?a.close():38!==t&&40!==t||(e.preventDefault(),a[38===t?"previous":"next"]()))}}),t.bind(this.input.form,{submit:this.close.bind(this)}),t.bind(this.ul,{mousedown:function(e){var t=e.target;if(t!==this){for(;t&&!/li/i.test(t.nodeName);)t=t.parentNode;t&&0===e.button&&(e.preventDefault(),a.select(t,e.target))}}}),this.input.hasAttribute("list")?(this.list="#"+this.input.getAttribute("list"),this.input.removeAttribute("list")):this.list=this.input.getAttribute("data-list")||r.list||[],o.all.push(this)};a.prototype={set list(e){Array.isArray(e)?this._list=e:"string"==typeof e&&e.indexOf(",")>-1?this._list=e.split(/\s*,\s*/):(e=t(e),e&&e.children&&(this._list=i.apply(e.children).map(function(e){return e.textContent.trim()}))),document.activeElement===this.input&&this.evaluate()},get selected(){return this.index>-1},get opened(){return!this.ul.hasAttribute("hidden")},close:function(){this.ul.setAttribute("hidden",""),this.index=-1,t.fire(this.input,"awesomplete-close")},open:function(){this.ul.removeAttribute("hidden"),this.autoFirst&&-1===this.index&&this["goto"](0),t.fire(this.input,"awesomplete-open")},next:function(){var e=this.ul.children.length;this["goto"](this.index<e-1?this.index+1:-1)},previous:function(){var e=this.ul.children.length;this["goto"](this.selected?this.index-1:e-1)},"goto":function(e){var n=this.ul.children;this.selected&&n[this.index].setAttribute("aria-selected","false"),this.index=e,e>-1&&n.length>0&&(n[e].setAttribute("aria-selected","true"),this.status.textContent=n[e].textContent),t.fire(this.input,"awesomplete-highlight")},select:function(e,n){if(e=e||this.ul.children[this.index]){var r=t.fire(this.input,"awesomplete-select",{text:e.textContent,data:this.suggestions[t.siblingIndex(e)],origin:n||e});r&&(this.replace(e.textContent),this.close(),t.fire(this.input,"awesomplete-selectcomplete"))}},evaluate:function(){var e=this,t=this.input.value;t.length>=this.minChars&&this._list.length>0?(this.index=-1,this.ul.innerHTML="",this.suggestions=this._list.filter(function(n){return e.filter(n,t)}).sort(this.sort).slice(0,this.maxItems),this.suggestions.forEach(function(n){e.ul.appendChild(e.item(n,t))}),0===this.ul.children.length?this.close():this.open()):this.close()}},a.all=[],a.FILTER_CONTAINS=function(e,n){return RegExp(t.regExpEscape(n.trim()),"i").test(e)},a.FILTER_STARTSWITH=function(e,n){return RegExp("^"+t.regExpEscape(n.trim()),"i").test(e)},a.SORT_BYLENGTH=function(e,t){return e.length!==t.length?e.length-t.length:t>e?-1:1},a.ITEM=function(e,n){var r=""===n?e:e.replace(RegExp(t.regExpEscape(n.trim()),"gi"),"<mark>$&</mark>");return t.create("li",{innerHTML:r,"aria-selected":"false"})},a.REPLACE=function(e){this.input.value=e};var i=Array.prototype.slice;return t.create=function(e,n){var r=document.createElement(e);for(var a in n){var i=n[a];if("inside"===a)t(i).appendChild(r);else if("around"===a){var o=t(i);o.parentNode.insertBefore(r,o),r.appendChild(o)}else a in r?r[a]=i:r.setAttribute(a,i)}return r},t.bind=function(e,t){if(e)for(var n in t){var r=t[n];n.split(/\s+/).forEach(function(t){e.addEventListener(t,r)})}},t.fire=function(e,t,n){var r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0);for(var a in n)r[a]=n[a];return e.dispatchEvent(r)},t.regExpEscape=function(e){return e.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")},t.siblingIndex=function(e){for(var t=0;e=e.previousElementSibling;t++);return t},"undefined"!=typeof Document&&("loading"!==document.readyState?r():document.addEventListener("DOMContentLoaded",r)),a.$=t,a.$$=n,"undefined"!=typeof self&&(self.Awesomplete=a),"object"===("undefined"==typeof module?"undefined":babelHelpers["typeof"](module))&&module.exports&&(module.exports=a),a}();var Interests={interestPage:1,current_adventure:null,current_review:null,current_user:null,last_input_data:"",mode:"edit",model:"user",selector:"autocomplete",autocomplete:{},autocompleteResolver:"awesomplete",autocompleteSelectEvent:"awesomplete-selectcomplete",buttonStyle:"btn btn-info m-t-1 m-r-1 m-b-1",interests:"interests",interestsAdd:"interests-add",interestsHiddenBlock:"interests_hidden_block",hiddenInterests:"hidden_interests",interestsForCreationBlock:"interests_for_creation",apiResult:"create_interest_result",addInterestToUserButton:"add_interest",addInterestToAdventureButton:"add_interest_adventure",addInterestToReviewButton:"add_interest_review",removeInterestButton:"remove_interest",removeInterestAdventureButton:"remove_interest_adventure",removeInterestReviewButton:"remove_interest_review",loadMoreInterestButton:"load_more_interest",firstInterestButton:"first_user_interest",createInterestButton:"create_interest",editInterestButton:"edit_interest",deleteInterestButton:"delete_interest",interestsUrl:"/api/v1/interests/",interestsAutocompleteUrl:"/api/v1/interests/?format=keyvalue&fields=name&limit=10&like[name]={search}",interestsListUrl:"/api/v1/interests/list",addInterestUrl:"/api/v1/interests/add/",editInterestUrl:"/api/v1/interests/edit/",addInterestToUserUrl:"/api/v1/users/add-interest/",removeInterestFromUserUrl:"/api/v1/users/remove-interest/",refreshUserInterestsUrl:"/api/v1/users/interests/",refreshAdventureInterestsUrl:"/api/v1/adventures/interests/",addInterestToAdventureUrl:"/api/v1/adventures/add-interest/",removeInterestFromAdventureUrl:"/api/v1/adventures/remove-interest/",refreshReviewsInterestsUrl:"/api/v1/review/interests/",addInterestToReviewUrl:"/api/v1/review/add-interest/",removeInterestFromReviewUrl:"/api/v1/review/remove-interest/",initAwesomplete:function(){return this.autocomplete=new Awesomplete(document.querySelector("#"+this.selector),{list:[]}),this.autocomplete},fillInterestAwesompleteList:function(){if("awesomplete"===this.autocompleteResolver){var e=this;Ajax.get(e.interestsListUrl,function(t){e.autocomplete.list=JSON.parse(t).map(function(e){return e.name})})}},initBunnyAutocomplete:function(){return Autocomplete.create(this.selector,this.selector+"_hidden",this.interestsAutocompleteUrl,JSON.parse,{inputDelay:300}),null},addInterest:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.addInterestUrl+e;Ajax.get(n,function(n){var r=JSON.parse(n);"success"===r.action?(t.fillInterestAwesompleteList(),t.interestApiResult(e,r.action,null)):"exist"===r.action?t.interestApiResult(e,r.action,null):"error"===r.action&&t.interestApiResult(e,r.action,r.message)})},addInterestToUser:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.addInterestToUserUrl+e+"/"+this.current_user;Ajax.get(n,function(n){var r=JSON.parse(n);"added"===r.action?(t.fillInterestAwesompleteList(),t.interestApiResult(e,r.action,r.message),t.refreshUserInterests(),t.interestPage=1,document.getElementById(t.interestsAdd)&&(document.getElementById(t.interestsAdd).innerHTML=""),t.listInterests(mode)):"overflow"===r.action?t.interestApiResult(e,r.action,r.message):"error"===r.action&&t.interestApiResult(e,r.action,r.message)})},removeInterestFromUser:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.removeInterestFromUserUrl+e+"/"+this.current_user;Ajax.get(n,function(n){var r=JSON.parse(n);"removed"===r.action?(t.fillInterestAwesompleteList(),document.getElementById(t.selector).value="",t.interestApiResult(e,r.action,null),t.refreshUserInterests(),t.interestPage=1,document.getElementById(t.interestsAdd)&&(document.getElementById(t.interestsAdd).innerHTML=""),t.listInterests(mode)):"error"===r.action&&t.interestApiResult(e,r.action,r.message)})},refreshUserInterests:function(e){e=e||"x";var t=this,n=t.refreshUserInterestsUrl+this.current_user;Ajax.get(n,function(e){var n=JSON.parse(e).map(function(e){return e.name}),r="";n.forEach(function(e){r+='<button  class="app-s-close '+t.buttonStyle+'  refresh-buttons" data-item="'+e+'">'+e+"  </button>"}),document.getElementById(t.interests).innerHTML=r;for(var a=document.getElementsByClassName("refresh-buttons"),i=0;i<a.length;i++)a[i].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=this.getAttribute("data-item");t.removeInterestFromUser(n)})})},listInterests:function(e){"undefined"==typeof e&&(e=this.mode);var t,n=this;switch(this.model){case"user":t=n.refreshUserInterestsUrl+this.current_user+"/"+this.interestPage;break;case"adventure":t=n.refreshAdventureInterestsUrl+this.current_adventure+"/"+this.interestPage;break;case"review":t=n.refreshReviewsInterestsUrl+this.current_review+"/"+this.interestPage}Ajax.get(t,function(t){var r=JSON.parse(t).map(function(e){return e.name}),a=document.createElement("div"),i="";if(r.forEach(function(t){var r=t.replace(/\s+/g,"_");"create"==e&&n.testForSelected(r)||(i+='<button id="add-interest-buttons-'+r+'" class="'+n.buttonStyle+' add-interest-buttons" data-item="'+t+'">'+t+"  +</button>")}),a.innerHTML=i,document.getElementById(n.interestsAdd)){document.getElementById(n.interestsAdd).appendChild(a),n.interestPage++;for(var o=document.getElementsByClassName("add-interest-buttons"),s=0;s<o.length;s++)o[s].addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var r=this.getAttribute("data-item");if("edit"==e)switch(this.model){case"user":n.addInterestToUser(r);break;case"adventure":n.addInterestToAdventure(r);break;case"review":n.addInterestToReview(r)}else"create"==e&&n.collectInterestsForCreation(r)})}})},collectInterestsForCreation:function(e,t){var n=this;t=t||null;var r,a=e.replace(/\s+/g,"_"),i=document.getElementById(n.interestsHiddenBlock),o=document.getElementsByClassName(n.hiddenInterests);if(o.length<15&&i){var s=document.createElement("input");if(s.setAttribute("type","hidden"),s.setAttribute("name","interests[]"),s.setAttribute("id","interest_hidden_field_"+a),s.setAttribute("class",n.hiddenInterests),s.setAttribute("value",e),document.getElementById(n.interestsHiddenBlock).appendChild(s),document.getElementById("create-interest-buttons-"+a))document.getElementById("create-interest-buttons-"+a).classList.remove("hidden-xs-up");else{r='<button id="create-interest-buttons-'+a+'" class="app-s-close '+n.buttonStyle+' create-interest-buttons" data-item="'+e+'">'+e+" </button>";var l=document.createElement("div");l.style.display="inline-block",l.innerHTML=r,document.getElementById(n.interestsForCreationBlock).appendChild(l),t&&this.listSelected(),document.getElementById("create-interest-buttons-"+a).addEventListener("click",function(e){return e.preventDefault(),e.stopPropagation(),document.getElementById("add-interest-buttons-"+a)&&document.getElementById("add-interest-buttons-"+a).classList.remove("hidden-xs-up"),document.getElementById(n.interestsHiddenBlock).removeChild(document.getElementById("interest_hidden_field_"+a)),document.getElementById("create-interest-buttons-"+a).classList.add("hidden-xs-up"),!1})}document.getElementById("add-interest-buttons-"+a)&&document.getElementById("add-interest-buttons-"+a).classList.add("hidden-xs-up")}},createFromInput:function(){var e=this;if("undefined"==typeof mode){this.mode}var t=document.getElementById(e.selector).value;if(""==t)return!1;var n=t.replace(/\s+/g,"_");if(this.testForSelected(n))return!0;var r=e.interestsListUrl;Ajax.get(r,function(n){var r=JSON.parse(n).map(function(e){return e.name});r.indexOf(t)>-1?(e.collectInterestsForCreation(t),e.interestPage=1,e.listInterests(mode)):e.createInterest(t)})},testForSelected:function(e){for(var t,n,r=this,a=document.getElementsByClassName(r.hiddenInterests),i=!1,o=0;o<a.length;o++)t=a[o].getAttribute("value"),n=t.replace(/\s+/g,"_"),n==e&&(i=!0);return i},listSelected:function(){for(var e,t,n=this,r=document.getElementsByClassName(n.hiddenInterests),a="",i=0;i<r.length;i++)e=r[i].getAttribute("value"),t=e.replace(/\s+/g,"_"),a+='<button id="add-interest-buttons-'+t+'" class="'+n.buttonStyle+' add-interest-buttons" data-item="'+e+'">'+e+"  +</button>";var o=document.createElement("div");o.style.display="inline-block",o.innerHTML=a,document.getElementById(n.interestsAdd)&&(document.getElementById(n.interestsAdd).innerHTML="",document.getElementById(n.interestsAdd).appendChild(o));for(var s=document.getElementsByClassName("add-interest-buttons"),l=0;l<s.length;l++)s[l].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var t=this.getAttribute("data-item");if("edit"==mode)switch(n.model){case"user":n.addInterestToUser(t);break;case"adventure":n.addInterestToAdventure(t);break;case"review":n.addInterestToReview(t)}else"create"==mode&&n.collectInterestsForCreation(t)}),s[l].classList.add("hidden-xs-up");this.interestPage=1},createInterest:function(e){var t=this;if(""==e)return!1;var n=t.addInterestUrl+e;Ajax.get(n,function(n){var r=JSON.parse(n);"success"==r.action&&(t.fillInterestAwesompleteList(),t.collectInterestsForCreation(e,!0),t.interestPage=1,t.listInterests())})},editInterest:function(e){var t,n=this,r=this.last_input_data,a=n.editInterestUrl+r+"/"+e;Ajax.get(a,function(a){var i=JSON.parse(a);"edited"===i.action?(n.fillInterestAwesompleteList(),t="Interest "+r+" successfully renamed to "+e,n.interestApiResult(e,i.action,t)):"not found"===i.action&&(t="Interest "+r+" not found",n.interestApiResult(e,i.action,t))})},deleteInterest:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.interestsUrl+e+"/delete";Ajax.get(n,function(n){var r=JSON.parse(n);"deleted"===r.action?(t.fillInterestAwesompleteList(),t.interestApiResult(e,r.action,null)):"not fount"===r.action&&t.interestApiResult(e,r.action,null)})},checkInputChanges:function(){var e=this,t=document.getElementById(e.selector).value;t.trim();var n=e.interestsListUrl;Ajax.get(n,function(n){var r=JSON.parse(n).map(function(e){return e.name});r.indexOf(t)>-1&&(e.last_input_data=t)})},refreshAdventuresInterests:function(e){e=e||"x";var t=this,n=t.refreshAdventureInterestsUrl+this.current_adventure;Ajax.get(n,function(e){var n=JSON.parse(e).map(function(e){return e.name}),r="";n.forEach(function(e){r+='<button  class="app-s-close '+t.buttonStyle+' refresh-buttons" data-item="'+e+'">'+e+"  </button>"}),document.getElementById(t.interests).innerHTML=r;for(var a=document.getElementsByClassName("refresh-buttons"),i=0;i<a.length;i++)a[i].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=this.getAttribute("data-item");t.removeInterestFromAdventure(n)})})},addInterestToAdventure:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.addInterestToAdventureUrl+e+"/"+this.current_adventure;Ajax.get(n,function(n){var r=JSON.parse(n);"added"===r.action?(t.fillInterestAwesompleteList(),t.interestApiResult(e,r.action,r.message),t.refreshAdventuresInterests()):"overflow"===r.action?t.interestApiResult(e,r.action,r.message):"error"===r.action&&t.interestApiResult(e,r.action,r.message)})},removeInterestFromAdventure:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.removeInterestFromAdventureUrl+e+"/"+this.current_adventure;Ajax.get(n,function(n){var r=JSON.parse(n);"removed"===r.action?(t.fillInterestAwesompleteList(),document.getElementById(t.selector).value="",t.interestApiResult(e,r.action,null),t.refreshAdventuresInterests()):"error"===r.action&&t.interestApiResult(e,r.action,r.message);
})},refreshReviewsInterests:function(e){e=e||"x";var t=this,n=t.refreshReviewsInterestsUrl+this.current_review;Ajax.get(n,function(e){var n=JSON.parse(e).map(function(e){return e.name}),r="";n.forEach(function(e){r+='<button  class="app-s-close '+t.buttonStyle+' refresh-buttons" data-item="'+e+'">'+e+"  </button>"}),document.getElementById(t.interests).innerHTML=r;for(var a=document.getElementsByClassName("refresh-buttons"),i=0;i<a.length;i++)a[i].addEventListener("click",function(e){e.preventDefault(),e.stopPropagation();var n=this.getAttribute("data-item");t.removeInterestFromReview(n)})})},addInterestToReview:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.addInterestToReviewUrl+e+"/"+this.current_review;Ajax.get(n,function(n){var r=JSON.parse(n);"added"===r.action?(t.fillInterestAwesompleteList(),t.interestApiResult(e,r.action,r.message),t.refreshReviewsInterests()):"overflow"===r.action?t.interestApiResult(e,r.action,r.message):"error"===r.action&&t.interestApiResult(e,r.action,r.message)})},removeInterestFromReview:function(e){var t=this;e=e.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,"");var n=t.removeInterestFromReviewUrl+e+"/"+this.current_review;Ajax.get(n,function(n){var r=JSON.parse(n);"removed"===r.action?(t.fillInterestAwesompleteList(),document.getElementById(t.selector).value="",t.interestApiResult(e,r.action,null),t.refreshReviewsInterests()):"error"===r.action&&t.interestApiResult(e,r.action,r.message)})},interestApiResult:function(e,t,n){var r,a=this,i=document.getElementById(a.apiResult);switch(i.classList.remove("hidden-xs-up"),t){case"success":r='You interest "'+e+'" successfully created',i.classList.add("alert-success"),i.innerText=document.createTextNode(r).textContent;break;case"added":r='You interest "'+e+'" successfully added',i.classList.add("alert-success"),i.innerText=document.createTextNode(r).textContent;break;case"edited":r=n,i.classList.add("alert-success"),i.innerText=document.createTextNode(r).textContent;break;case"exist":r='Interest "'+e+'" already  exist',i.classList.add("alert-info"),i.innerText=document.createTextNode(r).textContent;break;case"overflow":r=n,i.classList.add("alert-warning"),i.innerText=document.createTextNode(r).textContent;break;case"not found":r=n,i.classList.add("alert-warning"),i.innerText=document.createTextNode(r).textContent;break;case"removed":r='Interest "'+e+'" removed',i.classList.add("alert-warning"),i.innerText=document.createTextNode(r).textContent;break;case"error":r=n,i.classList.add("alert-danger"),i.innerText=document.createTextNode(r).textContent,document.querySelector("#"+a.selector).value=""}setTimeout(function(){i.innerText=document.createTextNode("").textContent,i.className="hidden-xs-up p-x-3 p-y-1 m-b-2"},4e3)},initInterests:function(){var e=this;if(document.getElementById(this.selector)){"awesomplete"===this.autocompleteResolver?(this.autocomplete=this.initAwesomplete(),this.fillInterestAwesompleteList()):"bunny"===this.autocompleteResolver&&(this.autocomplete=this.initBunnyAutocomplete()),document.getElementById(this.selector).addEventListener("input",function(){e.checkInputChanges()}),document.getElementById(this.selector).addEventListener(e.autocompleteSelectEvent,function(){e.checkInputChanges()}),document.getElementById(this.selector).addEventListener("keydown",function(t){if(13==t.keyCode){var n=document.getElementById(e.selector).value;if(n.trim(),n.length&&n.length>3)if("edit"===this.mode)switch(e.model){case"user":e.addInterestToUser(n);break;case"adventure":e.addInterestToAdventure(n);break;case"review":e.addInterestToReview(n)}else e.createFromInput()}});var t=document.querySelector("[data-user]");t&&(this.current_user=t.getAttribute("data-user"));var n=document.querySelector("[data-adventure]");n&&(this.current_adventure=n.getAttribute("data-adventure"));var r=document.querySelector("[data-review]");r&&(this.current_review=r.getAttribute("data-review"))}if(document.getElementById(e.interests))switch(e.model){case"user":e.refreshUserInterests();break;case"adventure":e.refreshAdventuresInterests();break;case"review":e.refreshReviewsInterests()}document.getElementById(e.addInterestToUserButton)&&document.getElementById(e.addInterestToUserButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),n.length&&n.length>3&&e.addInterestToUser(n)}),document.getElementById(e.addInterestToAdventureButton)&&document.getElementById(e.addInterestToAdventureButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),n.length&&n.length>3&&e.addInterestToAdventure(n)}),document.getElementById(e.addInterestToReviewButton)&&document.getElementById(e.addInterestToReviewButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),n.length&&n.length>3&&e.addInterestToReview(n)}),document.getElementById(e.removeInterestButton)&&document.getElementById(e.removeInterestButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),""!==n&&e.removeInterestFromUser(n)}),document.getElementById(e.removeInterestAdventureButton)&&document.getElementById(e.removeInterestAdventureButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),""!==n&&e.removeInterestFromAdventure(n)}),document.getElementById(e.removeInterestReviewButton)&&document.getElementById(e.removeInterestReviewButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),""!==n&&e.removeInterestFromReview(n)}),document.getElementById(e.interestsAdd)&&e.listInterests(mode),document.getElementById(e.loadMoreInterestButton)&&document.getElementById(e.loadMoreInterestButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.listInterests(mode)}),document.getElementById(this.firstInterestButton)&&document.getElementById(this.firstInterestButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.createFromInput()}),document.getElementById(e.createInterestButton)&&document.getElementById(e.createInterestButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),""!==n&&e.addInterest(n)}),document.getElementById(e.editInterestButton)&&document.getElementById(e.editInterestButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),""!==n&&e.editInterest(n)}),document.getElementById(e.deleteInterestButton)&&document.getElementById(e.deleteInterestButton).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=document.getElementById(e.selector).value;n.trim(),""!==n&&e.deleteInterest(n)})}},MultiSelectionList=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?null:arguments[1],r=arguments.length<=2||void 0===arguments[2]?null:arguments[2];babelHelpers.classCallCheck(this,e),this.id=t,this.containerEl=document.getElementById(t),this.attachEventHandlers(),this.onSelectAtLeastOneClb=n,this.onDeselectAllClb=r,this.selectionClassName="selected"}return babelHelpers.createClass(e,[{key:"attachEventHandlers",value:function(){var e=this,t=this.containerEl.getElementsByClassName("list-item");t.forEach(function(t){t.addEventListener("click",function(t){var n=t.target;n.classList.toggle(e.selectionClassName);var r=e.hasClass(n,e.selectionClassName),a=n.getAttribute("data-id"),i=e.containerEl;if(r){var o=document.createElement("input");o.setAttribute("type","hidden"),o.setAttribute("id",e.getInputId(a)),o.setAttribute("value",a),o.setAttribute("name",e.getContainerId()+"[]"),i.appendChild(o)}else i.removeChild(i.querySelector("#"+e.getInputId(a)));r||i.getElementsByClassName(e.selectionClassName).length>0&&null!=e.onSelectAtLeastOneClb?e.onSelectAtLeastOneClb():e.onDeselectAllClb()})})}},{key:"getInputId",value:function(e){return"id_"+e}},{key:"hasClass",value:function(e,t){var n=" "+t+" ";return(" "+e.className+" ").replace(/[\n\t]/g," ").indexOf(n)>-1}},{key:"getContainerId",value:function(){return this.containerEl.getAttribute("id")}}]),e}(),AdminUsersController={index:function(){DataTable.define("users","template_user_row",{},{format_data:function(e){return e.link="/admin/users/"+e.id,e.delete_link="/admin/users/"+e.id+"/delete",e}})&&DataTable.onRedraw("users",function(e){window.scrollTo(0,0)})},showEditUser:function(e){Validate.validate(document.getElementById("add_edit_user_form"),{on_focus:function(e,t){var n=t.parentNode;n.classList.contains("tab-pane")&&(n.classList.contains("active")||TabList.changeTab(n.getAttribute("id"))),setTimeout(function(){Validate.focus(e)},200)}}),this.categoryList=new MultiSelectionList("categories_bit",function(){},function(){}),DatePicker.create("birth_date"),Interests.initInterests()}},Spinner={_class:"app-spinner",_get:function(e){return"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))?e:document.getElementById(e)},_getSpinner:function(e){var t=e.getElementsByClassName(this._class)[0];return void 0===t?!1:t},_createSpinner:function(){var e=document.createElement("div");return e.classList.add(this._class),e},add:function(e){var t=this._get(e),n=this._getSpinner(t);n===!1&&this._add(t,n)},_add:function(e,t){t=this._createSpinner(),e.insertBefore(t,e.firstChild),e.setAttribute("disabled","disabled")},remove:function(e){var t=this._get(e),n=this._getSpinner(t);n!==!1&&this._remove(t,n)},_remove:function(e,t){e.removeChild(t),e.blur(),e.removeAttribute("disabled")},toggle:function(e){var t=this._get(e),n=this._getSpinner(t);n===!1?this._add(t,n):this._remove(t,n)}},Geo={resolveLocationData:function(e,t){var n=this;this.nameSelector=t.nameSelector||null,this.locationSelector=t.locationSelector||null,this.idSelector=t.idSelector||null,this.latSelector=t.latSelector||null,this.lngSelector=t.lngSelector||null,this.countrySelector=t.countrySelector||null,this.name=document.getElementById(this.nameSelector).value,this.resolver=e,this.callResolver(),document.getElementById(this.nameSelector)&&document.getElementById(this.nameSelector).addEventListener("change",function(){setTimeout(function(){n.name=n.name.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g,"+"),n.callResolver()},200)})},callResolver:function(){this.resolver(this.name,this.locationSelector,this.idSelector,this.latSelector,this.lngSelector,this.countrySelector)}},GoogleGeo={resolver:function(e,t,n,r,a,i){var o="https://maps.google.com/maps/api/geocode/json?address="+e;Ajax.get(o,function(e){var o=JSON.parse(e),s=o.results[0].geometry.location.lat,l=o.results[0].geometry.location.lng,d=null,c=o.results[0].address_components;c.forEach(function(e){Array.isArray(e.types)&&e.types.forEach(function(t){"country"==t&&(d=e.long_name)})}),d&&document.getElementById(i)&&(document.getElementById(i).innerHTML=d),document.getElementById(r)&&(document.getElementById(r).value=s),document.getElementById(a)&&(document.getElementById(a).value=l),document.getElementById(t)&&(document.getElementById(t).value="POINT("+s+" , "+l+")"),document.getElementById(n)&&(document.getElementById(n).value=o.results[0].place_id)},function(e){},{})},init:function(e,t){var n=this;t=t||e.geoOption.nameSelector;var r=e;r.autocomplete=new google.maps.places.Autocomplete(document.getElementById(t),{types:["geocode"]}),google.maps.event.addListener(r.autocomplete,"place_changed",function(){return n.resolveLocationData(r.geoOption)})},resolveLocationData:function(e){Geo.resolveLocationData(this.resolver,e)}},Dropdown={_collection:{},init:function(e){e=this._elOrId(e),void 0!==e.id&&(this._collection[e.id]=e);var t=this.getDropdownToggleBtn(e);null!==t&&(this._makeUnclosableInside(e),this._attachToggleClickEvent(e),this._attachToggleBtnMethods(e))},_elOrId:function(e){return"string"==typeof e?document.getElementById(e):e},_attachToggleClickEvent:function(e){var t=this;this.getDropdownToggleBtn(e).addEventListener("click",function(n){n.stopPropagation(),t.toggle(e)})},get:function(e){return this._collection[e]},getDropdownToggleBtn:function(e){return e=this._elOrId(e),e.querySelector('[data-toggle="dropdown"]')},getDropdownMenu:function(e){return e=this._elOrId(e),e.getElementsByClassName("dropdown-menu")[0]},isClosableInside:function(e){return e.hasAttribute("data-close-inside")},_makeUnclosableInside:function(e){this.isClosableInside(e)&&this.getDropdownMenu(e).addEventListener("click",function(e){e.stopPropagation()})},_getCloseEvent:function(e){return new CustomEvent("close",{detail:{dropdown:e}})},_getOpenEvent:function(e){return new CustomEvent("open",{detail:{dropdown:e}})},_bodyHandler:function(e){e.classList.contains("open")&&this.close(e)},_getUniqueBodyHandler:function(e){return void 0===e._bodyHandler&&(e._bodyHandler=this._bodyHandler.bind(this,e)),e._bodyHandler},close:function(e){e=this._elOrId(e),e.classList.remove("open"),document.body.removeEventListener("click",this._getUniqueBodyHandler(e)),this.getDropdownToggleBtn(e).dispatchEvent(this._getCloseEvent(e))},_attachToggleBtnMethods:function(e){var t=this.getDropdownToggleBtn(e);t.close=function(){this.close(e)},t.open=function(){this.open(e)},t.toggle=function(){this.toggle(e)}},open:function(e){e=this._elOrId(e),e.classList.add("open"),document.body.addEventListener("click",this._getUniqueBodyHandler(e)),this.getDropdownToggleBtn(e).dispatchEvent(this._getOpenEvent(e))},toggle:function(e){e=this._elOrId(e),e.classList.contains("open")?this.close(e):this.open(e)}};document.getElementsByClassName("dropdown").forEach(function(e){Dropdown.init(e)});var Search$1=Search={_overlay:null,_searchId:"navbar_search",_inputId:"navbar_search_input",init:function(){this._attachEventListeners()},_attachEventListeners:function(){var e=this;null!==this.getSearchInput()&&(this.getSearchInput().addEventListener("open",function(){e._showOverlay()}),this.getSearchInput().addEventListener("close",function(){e._hideOverlay()}))},getSearch:function(){return document.getElementById(this._searchId)},getSearchInput:function(){return document.getElementById(this._inputId)},showSearch:function(){this.getSearch().classList.add("open"),this._showOverlay()},hideSearch:function(){this.getSearch().classList.remove("open"),this._hideOverlay()},_showOverlay:function(){var e=document.createElement("div");e.classList.add("app-overlay"),this._overlay=e,document.body.appendChild(e)},_hideOverlay:function(){document.body.removeChild(this._overlay)}},Navbar={el:document.getElementById("navbar"),mobileEl:document.getElementById("navbar-mobile"),overlayEl:null,mobileActiveClass:"active",mobileOverlayClass:"app-overlay",mobileOverlayId:"navbar_mobile_overlay",mobileHamburgerSelector:'[data-id="navbar-hamburger"]',init:function(){this.attachHamburgerClickEvent(),this.initSearch()},getHeight:function(){return this.el.clientHeight},toggleMobileNav:function(){this.mobileEl.classList.toggle(this.mobileActiveClass),this.toggleMobileOverlay()},toggleMobileOverlay:function(){null===this.overlayEl?(this.overlayEl=document.createElement("div"),this.overlayEl.id=this.mobileOverlayId,this.overlayEl.classList.add(this.mobileOverlayClass),document.body.appendChild(this.overlayEl),this.attachMobileOverlayClickEvent(this.overlayEl)):(document.body.removeChild(this.overlayEl),this.overlayEl=null)},attachMobileOverlayClickEvent:function(e){var t=this;e.addEventListener("click",function(){t.toggleMobileNav()})},attachHamburgerClickEvent:function(){var e=this;document.querySelectorAll(this.mobileHamburgerSelector).forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),e.toggleMobileNav()})})},initSearch:function(){Search$1.init()}},Adventures={autocomplete:{},autocompleteResolver:"awesomplete",geo:GoogleGeo,geoOption:{nameSelector:"place_name",locationSelector:"place_location",idSelector:"place_id",latSelector:"location_lat",lngSelector:"location_lng",countrySelector:"country_name"},model:"adventure",like_mode:"activity_comment",dateFields:["datetime_from","datetime_to"],anchors:{email:"user_email",about:"user_about",birth:"user_birth",image:"user_image",id:"user_id"},adventPage:2,adminValidate:!0,appValidate:!1,submitPermission:!1,userAwesompleteUrl:"/api/v1/users/string/",activityAwesompleteUrl:"",reviewAwesompleteUrl:"",awesompleteUrl:"/api/v1/users/string/",userDataUrl:"/api/v1/users/userId/",activitiesContentUrl:"/activities?page=",reviewsContentUrl:"/reviews?page=",activityInviteUrl:"/api/v1/adventures/invite",reviewInviteUrl:"/api/v1/adventures/invite",likeActivityPostUrl:"/api/v1/activity_comments/like/",likeReviewPostUrl:"/api/v1/review_comments/like/",likeAdventureUrl:"/api/v1/adventures/like/",likeReviewUrl:"/api/v1/reviews/like/",replyUrl:"/api/v1/activity_comments/reply/",autocompleteSelectEvent:"awesomplete-selectcomplete",adminFormId:"add_edit_activities_form",appFormId:"add_edit_activities_form",userAutocompleteId:"user_autocomplete",adventAutocompleteId:"advent_autocomplete",adventInviteFormId:"activity_invited",inviteButtonId:"activity_invited_submit_button",appTopId:"app_new_activities_top_step",postContainerId:"app_activity_post_container",postPreviewContainerId:"preview_container",moreButtonId:"app_button_more",selectPromoImageButtonId:"select_promo_image",promoImageInputId:"promo_image",appRowsId:"app_activity_rows",adventStepId:"app_new_activities_step",appDropdownClass:"app-dropdown",hiddenClass:"hidden-xs-up",stepClassName:"app-new-activities-step",nextStepsClass:"app-new-activities-next",backStepsClass:"app-new-activities-back",likeActivityPostClass:"app-activity-post-like-data",createLikeActivityPostClass:"app-activity-post-like",likeReviewPostClass:"app-review-post-like-data",createLikeReviewPostClass:"app-review-post-like",likeAdventureClass:"app-activity-like-data",createLikeAdventureClass:"app-activity-like",likeReviewClass:"app-review-like-data",createLikeReviewClass:"app-review-like",replyClass:"app-activity-reply-data",createReplyClass:"app-activity-reply",replyBottomBorderClass:"app-card-b-divider",postFormClass:"app-activity-response-form",responseTitleClass:"app-responses-title",responseClass:"app-responses-block",responseClassName:"row app-card m-x-0 app-p-card app-activity-m-t-quarter hidden-xs-up",appCardClass:"app-card",sections:{1:document.getElementById("app_new_activities_step1"),2:document.getElementById("app_new_activities_step2"),3:document.getElementById("app_new_activities_step3"),4:document.getElementById("app_new_activities_step4"),5:document.getElementById("app_new_activities_step5")},initGeoComplete:function(e){this.geo.init(this,e)},initAwesomplete:function(e){var t=this.awesompleteUrl;Ajax.get(t,function(t){new Awesomplete(document.querySelector("#"+e),{list:JSON.parse(t)})})},initBunnyAutocomplete:function(e){Autocomplete.create(e,e+"_hidden",this.awesompleteUrl+"?like[name]={search}",JSON.parse,{inputDelay:300})},refreshUser:function(e){var t=this,n=document.getElementById(e).value;if(n=n.replace(/^\s+/,"").replace(/\s+$/,"").replace(/\//g,""),""==n)return!1;var r=t.userDataUrl+n;Ajax.get(r,function(n){var r=JSON.parse(n);"string"==typeof r&&"error"==r?document.getElementById(e).value=document.getElementById("user_id").value:(document.getElementById(t.anchors.email)&&(document.getElementById(t.anchors.email).innerText=document.createTextNode(r.email).textContent),document.getElementById(t.anchors.about)&&(document.getElementById(t.anchors.about).innerText=document.createTextNode(r.about).textContent),document.getElementById(t.anchors.birth)&&(document.getElementById(t.anchors.birth).innerText=document.createTextNode(r.birth_date).textContent),document.getElementById(t.anchors.image)&&document.getElementById(t.anchors.image).setAttribute("src",r.photo_path),document.getElementById(t.anchors.id)&&(document.getElementById(t.anchors.id).value=document.getElementById(e).value))})},getNode:function(e){return"object"===("undefined"==typeof e?"undefined":babelHelpers["typeof"](e))?e:document.getElementById(e)},addUserRefreshEventListeners:function(e){var t=this,n=document.getElementById(e);n&&(n.addEventListener("blur",function(){t.refreshUser(e)}),n.addEventListener(t.autocompleteSelectEvent,function(){t.refreshUser(e)}))},addReplyEventListener:function(e){var t=this,n=this.getNode(e);n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.showPostForm(n)})},addLikeEventListener:function(e){var t=this,n=this.getNode(e);n.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),t.createLike(n)})},addFormKeyDownListener:function(e){var t=this,n=this.getNode(e);n.addEventListener("keydown",function(e){13==e.keyCode&&"form"==n.tagName.toLowerCase()&&t.sendPostForm(n)})},refreshActivity:function(e){},addActivityRefreshEventListeners:function(e){var t=this,n=document.getElementById(e);n&&(n.addEventListener("blur",function(){t.refreshActivity(e)}),n.addEventListener(t.autocompleteSelectEvent,function(){t.refreshActivity(e)}))},checkSubmit:function(){var e=this;document.forms[this.appFormId].addEventListener("submit",function(t){return e.submitPermission?!0:(t.stopPropagation(),t.preventDefault(),!1)})},cancelCreation:function(e){e.href&&(window.location.href=e.href)},toStep:function(e){var t=this,n=[1,2,3,4,5],r=this.adventStepId;n.forEach(function(e){var n=document.getElementById(r+e);n&&n.classList.add(t.hiddenClass)});var a=document.getElementById(this.appTopId);return a.innerHTML=e,document.getElementById(r+e).classList.remove(t.hiddenClass),Element.scrollTo(document.getElementById(this.appFormId),{duration:1e3,offset:-Navbar.getHeight()}),!1},createLike:function(e){if(e.hasAttribute("data-liked"))return!1;var t=e.getAttribute("data-like"),n=void 0,r=void 0,a=void 0;switch(this.like_mode){case"activity_comment":n=this.likeActivityPostUrl,r=this.likeActivityPostClass,a=this.createLikeActivityPostClass;break;case"review_comment":n=this.likeReviewPostUrl,r=this.likeReviewPostClass,a=this.createLikeReviewPostClass;break;case"adventure":n=this.likeAdventureUrl,r=this.likeAdventureClass,a=this.createLikeAdventureClass;break;case"review":n=this.likeReviewUrl,r=this.likeReviewClass,a=this.createLikeReviewClass}n+=t,Ajax.get(n,function(e){var n=JSON.parse(e);if(n.result){var i=document.querySelector("."+r+'[data-like="'+t+'"]'),o=document.querySelector("."+a+'[data-like="'+t+'"]');"object"==("undefined"==typeof o?"undefined":babelHelpers["typeof"](o))&&(o.setAttribute("data-liked","1"),o.getElementsByTagName("svg")[0].classList.add("active")),i.innerHTML=n.count}else{var s=document.querySelector("."+a+'[data-like="'+t+'"] > svg');"object"==("undefined"==typeof s?"undefined":babelHelpers["typeof"](s))&&s.removeAttribute("role")}})},showPostForm:function(e){var t=this,n=e.getAttribute("data-reply"),r=document.querySelector('form[data-form="'+n+'"]');r&&r.parentNode.classList.toggle(t.hiddenClass)},createActivity:function(){this.submitPermission=!0;var e=document.getElementsByClassName(this.nextStepsClass),t=e.item(e.length-1);t&&t.setAttribute("disabled","disabled"),document.forms[this.appFormId].submit()},sendPostForm:function(e){var t=this;if(!(e instanceof Node&&"form"==e.tagName.toLowerCase()))return!1;var n=this,r=e.getElementsByTagName("input"),a=e.getElementsByTagName("textarea"),i=r[0].value;""==i&&(i="null");var o=this.replyUrl+i,s=new FormData(e),l=new XMLHttpRequest;a[0].value=null,l.open("POST",o,!0),l.setRequestHeader("X-Requested-With","XMLHttpRequest"),l.onload=function(){if(l.readyState===XMLHttpRequest.DONE&&200==l.status){var e=JSON.parse(l.responseText);if(e.result){var r=void 0,a=document.createElement("div");if(e.newPost){if(r=document.querySelector("#"+n.postContainerId),!r)return!1;var o=document.createElement("div");o.classList.add("m-b-2"),a.classList.add("row"),a.classList.add(t.appCardClass),a.classList.add("app-p-card"),a.classList.add("m-x-0"),a.setAttribute("data-post",e.postId),a.innerHTML=e.html;var s=document.createElement("div");s.className=n.responseClassName,s.innerHTML=e.replyTitleHtml,o.appendChild(a),o.appendChild(s),r.appendChild(o);var d=a.querySelector('[data-reply="'+e.postId+'"]'),c=a.querySelector('[data-like="'+e.postId+'"]'),u=a.querySelector("."+n.postFormClass);c.removeAttribute("href"),n.addReplyEventListener(d),n.addFormKeyDownListener(u)}else{if(r=document.querySelector('[data-post="'+i+'"]'),!r)return!1;var p=void 0,m=r.parentNode;a.classList.add("col-xs-12"),a.classList.add("p-t-2"),a.classList.add(n.replyBottomBorderClass),p=m.getElementsByClassName(n.responseClass),p.length>0&&(a.innerHTML=e.html,p[0].appendChild(a),p[0].parentNode.classList.remove(n.hiddenClass));var h=document.querySelector('[data-like="'+e.postId+'"]');n.addLikeEventListener(h)}var v=document.querySelector("."+n.replyClass+'[data-reply="'+i+'"]');v&&(v.innerHTML=e.count)}}},l.send(s)},sendInvites:function(){var e=document.forms[this.adventInviteFormId],t=new FormData(e),n=new XMLHttpRequest,r="adventure"==this.model?this.activityInviteUrl:this.reviewInviteUrl;n.open("POST",r,!0),n.setRequestHeader("X-Requested-With","XMLHttpRequest"),n.onload=function(){if(n.readyState===XMLHttpRequest.DONE&&200==n.status){JSON.parse(n.responseText)}},n.send(t)},initInviteFriends:function(){var e=this,t=document.getElementById(this.inviteButtonId);t&&t.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault(),e.sendInvites()})},initStepControls:function(){var e=this,t=document.getElementsByClassName(this.nextStepsClass),n=document.getElementsByClassName(this.backStepsClass);t.forEach(function(t){t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var n=parseInt(this.getAttribute("data-step"));switch(n){case 1:e.ckeEditorToTextarea(),e.validateStep(1)&&e.toStep(2);break;case 2:e.ckeEditorToTextarea(),e.validateStep(2)&&e.toStep(3);break;case 3:e.ckeEditorToTextarea(),e.validateStep(3)&&e.toStep(4);break;case 4:e.ckeEditorToTextarea(),e.validateStep(4)&&e.toStep(5);break;case 5:e.ckeEditorToTextarea(),e.validateStep(5)&&e.createActivity()}return!1})}),n.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var r=parseInt(this.getAttribute("data-step"));switch(r){case 1:e.cancelCreation(t);break;case 2:e.toStep(1);break;case 3:e.toStep(2);break;case 4:e.toStep(3);break;case 5:e.toStep(4)}return!1})})},validateStep:function(e){return Validate.validateSection(this.sections[e])},setRequired:function(e){var t=document.getElementById(e);t&&t.setAttribute("required","required")},ckeEditorToTextarea:function(){if("undefined"!=typeof CKEDITOR)for(var e in CKEDITOR.instances)CKEDITOR.instances[e].updateElement()},initPostSubmit:function(){var e=this;document.getElementsByClassName(this.postFormClass).forEach(function(t){t.addEventListener("keydown",function(n){13==n.keyCode&&"form"==t.tagName.toLowerCase()&&e.sendPostForm(t)})})},initDropdown:function(){var e=document.getElementsByClassName(this.appDropdownClass);e.forEach(function(e){e.addEventListener("click",function(e){e.stopPropagation()})})},initDatePicker:function(){this.dateFields.forEach(function(e){var t=void 0;document.getElementById(e)&&(t=DatePicker.create(e,{onlyAsNativeFallback:!1}))})},initMoreButton:function(e){var t=this,n=document.getElementById(e),r=document.querySelectorAll("[name^=categories][checked]"),a="";r.forEach(function(e){a+="&"+e.name+"=1"}),n&&n.addEventListener("click",function(){Spinner.add(n),setTimeout(function(){Spinner.remove(n)},2e3);var r=void 0,i=void 0;switch(t.model){case"adventure":r=t.activitiesContentUrl;break;case"review":r=t.reviewsContentUrl}switch(r=r+t.adventPage+a,t.like_mode){case"adventure":i=t.createLikeAdventureClass;break;case"review":i=t.createLikeReviewClass}Ajax.get(r,function(r){var a=JSON.parse(r);if(1==a.success){t.adventPage>=a.lastPage&&document.getElementById(e).classList.add(t.hiddenClass);var o=document.getElementById(t.appRowsId),s=document.createElement("div");s.classList.add("row"),s.innerHTML=a.html;var l=s.querySelectorAll("."+i+"[data-like]");l.forEach(function(e){e.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),t.createLike(e)})}),o.appendChild(s),Spinner.remove(n),t.adventPage++}})})},activitiesInit:function(){var e=this;this.initDropdown(),document.getElementById(this.moreButtonId)&&this.initMoreButton(this.moreButtonId);var t=void 0;switch(this.like_mode){case"adventure":t=this.createLikeAdventureClass;break;case"review":t=this.createLikeReviewClass}var n=document.querySelectorAll("."+t+"[data-like]");n.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.createLike(t)})})},createEditAdventureInit:function(){var e=this;this.initDropdown(),this.checkSubmit(),document.getElementById(this.userAutocompleteId)&&("bunny"===this.autocompleteResolver?this.initBunnyAutocomplete(this.userAutocompleteId):"awesomplete"===this.autocompleteResolver&&this.initAwesomplete(this.userAutocompleteId),this.addUserRefreshEventListeners(this.userAutocompleteId),this.refreshUser(this.userAutocompleteId)),document.getElementById(this.adventAutocompleteId)&&(this.awesompleteUrl=this.activityAwesompleteUrl,this.addActivityRefreshEventListeners(this.adventAutocompleteId),this.initAwesomplete(this.adventAutocompleteId),this.refreshActivity(this.adventAutocompleteId)),document.getElementById(this.selectPromoImageButtonId)&&document.getElementById(this.selectPromoImageButtonId).addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),document.getElementById(e.promoImageInputId).click()}),this.initGeoComplete(this.geoOption.nameSelector)},activityInit:function(){var e=this;this.initDropdown(),this.initPostSubmit();var t=void 0;switch(this.like_mode){case"activity_comment":t=this.createLikeActivityPostClass;break;case"review_comment":t=this.createLikeReviewPostClass;break;case"adventure":t=this.createLikeAdventureClass;break;case"review":t=this.createLikeReviewClass}var n=document.querySelectorAll("."+t+"[data-like]");n.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.createLike(t)})});var r=document.querySelectorAll("."+this.createReplyClass+"[data-reply]");r.forEach(function(t){t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation(),e.showPostForm(t)})})}},AdminActivitiesController={list:function(){DataTable.define("adventures","template_adventure_row",{},{format_data:function(e){return e.edit_link="/admin/adventures/edit/"+e.id,e.delete_link="/admin/adventures/"+e.id+"/delete",e}})&&DataTable.onRedraw("adventures",function(e){window.scrollTo(0,0)})},createAdventures:function(e){Adventures.createEditAdventureInit()},editAdventures:function(e){Adventures.createEditAdventureInit()}},AdminInterestsController={index:function(){Interests.initInterests()}};Route.get("/admin/users",AdminUsersController.index),Route.get("/admin/users/{id}",AdminUsersController.showEditUser),Route.get("/admin/adventures",AdminActivitiesController.list),Route.get("/admin/adventures/create",AdminActivitiesController.createAdventures),Route.get("/admin/adventures/edit/{id}",AdminActivitiesController.editAdventures),Route.get("/admin/interests",AdminInterestsController.index);